experiment_name: "mdm_mnist_em"
seed: 42
device: "mps"  # "cpu" или "cuda" при необходимости

logging:
  level: "INFO"
  log_dir: "outputs/logs"

data:
  root: "data"
  batch_size: 128
  training_mode: baseline

  # ВАЖНО: p_missing > 0, иначе EM бессмысленен
  p_missing: 0.5
  binarize_threshold: 0.5
  flatten: false
  train_val_split: 0.9
  num_workers: 4
  download: true

model:
  image_channels: 3
  base_channels: 64
  channel_multipliers: [1, 2, 2]
  # Consistency loss (регуляризатор для согласованности предсказаний на соседних шагах)
  consistency_weight: 0.1  # 0.0 = выключено, >0.0 = включено (например, 0.1, 0.5)
  consistency_pair_offset: 1  # разница между соседними временами в паре (t_hi, t_lo)

em:
  uncond_num_steps: 50
